<nav class="py-4 bg-white dark:bg-gray-900 antialiased relative z-50 shadow-md border-b border-gray-200 dark:border-gray-700">
  <div class="max-w-screen-xl px-4 mx-auto 2xl:px-0">
    <div class="flex flex-wrap items-center justify-between gap-4 sm:flex-nowrap">
      <div class="sm:order-1 shrink-0">
        <% theme = cookies[:color_theme] || 'light' %>
        <a href="/" class="flex items-center">
          <%= image_tag(
                theme == 'dark' ? 'logo-dark.svg' : 'logo-default.svg',
                id: 'site-logo',
                class: 'mr-3 h-10 md:h-14 w-auto',
                alt: 'logo',
                width: '105',
                height: '40',
                data: {
                  "default-logo": asset_path('logo-default.svg'),
                  "dark-logo": asset_path('logo-dark.svg')
                }
              )
          %>
        </a>
      </div>

      <div class="flex items-center justify-end sm:space-x-2 sm:order-3 sm:mt-0 mt-1">
        <div class="relative">
          <button id="eCommerceSearchModalButton" type="button" data-modal-toggle="ecommerce-search-modal" data-modal-target="ecommerce-search-modal" class="inline-flex items-center justify-center hover:bg-gray-100 rounded-md text-gray-900 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white p-2">
            <span class="sr-only">
              Search
            </span>
            <svg class="sm:w-5 sm:h-5 w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z" />
            </svg>
          </button>
        </div>

        <a href="https://t.me/bakaInUa" class="inline-flex items-center justify-center hover:bg-gray-100 rounded-md text-gray-900 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white p-2" aria-label="Telegram">
          <svg class="sm:w-5 sm:h-5 w-4 h-4" fill="currentColor" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 30 30">
            <path d="M 25.154297 3.984375 C 24.829241 3.998716 24.526384 4.0933979 24.259766 4.2011719 C 24.010014 4.3016357 23.055766 4.7109106 21.552734 5.3554688 C 20.048394 6.0005882 18.056479 6.855779 15.931641 7.7695312 C 11.681964 9.5970359 6.9042108 11.654169 4.4570312 12.707031 C 4.3650097 12.746607 4.0439208 12.849183 3.703125 13.115234 C 3.3623292 13.381286 3 13.932585 3 14.546875 C 3 15.042215 3.2360676 15.534319 3.5332031 15.828125 C 3.8303386 16.121931 4.144747 16.267067 4.4140625 16.376953 C 5.3912284 16.775666 8.4218473 18.015862 8.9941406 18.25 C 9.195546 18.866983 10.29249 22.222526 10.546875 23.044922 C 10.714568 23.587626 10.874198 23.927519 11.082031 24.197266 C 11.185948 24.332139 11.306743 24.45034 11.453125 24.542969 C 11.511635 24.579989 11.575789 24.608506 11.640625 24.634766 L 11.644531 24.636719 C 11.659471 24.642719 11.67235 24.652903 11.6875 24.658203 C 11.716082 24.668202 11.735202 24.669403 11.773438 24.677734 C 11.925762 24.726927 12.079549 24.757812 12.216797 24.757812 C 12.80196 24.757814 13.160156 24.435547 13.160156 24.435547 L 13.181641 24.419922 L 16.191406 21.816406 L 19.841797 25.269531 C 19.893193 25.342209 20.372542 26 21.429688 26 C 22.057386 26 22.555319 25.685026 22.875 25.349609 C 23.194681 25.014192 23.393848 24.661807 23.478516 24.21875 L 23.478516 24.216797 C 23.557706 23.798129 26.921875 6.5273437 26.921875 6.5273438 L 26.916016 6.5507812 C 27.014496 6.1012683 27.040303 5.6826405 26.931641 5.2695312 C 26.822973 4.8564222 26.536648 4.4608905 26.181641 4.2480469 C 25.826669 4.0352506 25.479353 3.9700339 25.154297 3.984375 z M 24.966797 6.0742188 C 24.961997 6.1034038 24.970391 6.0887279 24.962891 6.1230469 L 24.960938 6.1347656 L 24.958984 6.1464844 C 24.958984 6.1464844 21.636486 23.196371 21.513672 23.845703 C 21.522658 23.796665 21.481573 23.894167 21.439453 23.953125 C 21.379901 23.91208 21.257812 23.859375 21.257812 23.859375 L 21.238281 23.837891 L 16.251953 19.121094 L 12.726562 22.167969 L 13.775391 17.96875 C 13.775391 17.96875 20.331562 11.182109 20.726562 10.787109 C 21.044563 10.471109 21.111328 10.360953 21.111328 10.251953 C 21.111328 10.105953 21.035234 10 20.865234 10 C 20.712234 10 20.506484 10.14875 20.396484 10.21875 C 18.963383 11.132295 12.671823 14.799141 9.8515625 16.439453 C 9.4033769 16.256034 6.2896636 14.981472 5.234375 14.550781 C 5.242365 14.547281 5.2397349 14.548522 5.2480469 14.544922 C 7.6958673 13.491784 12.47163 11.434667 16.720703 9.6074219 C 18.84524 8.6937992 20.838669 7.8379587 22.341797 7.1933594 C 23.821781 6.5586849 24.850125 6.1218894 24.966797 6.0742188 z"></path>
          </svg>
        </a>

        <a href="https://github.com/lsdmi/tanooki" class="inline-flex items-center justify-center hover:bg-gray-100 rounded-md text-gray-900 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white p-2" aria-label="GitHubRepo">
          <svg class="sm:w-5 sm:h-5 w-4 h-4" fill="currentColor" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="512" height="512" viewBox="0 0 512 512">
            <path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM252.8 8c-138.7 0-244.8 105.3-244.8 244 0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1 100-33.2 167.8-128.1 167.8-239 0-138.7-112.5-244-251.2-244zM105.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path>
          </svg>
        </a>

        <a href="https://www.buymeacoffee.com/bakaInUa" class="inline-flex items-center justify-center hover:bg-gray-100 rounded-md text-gray-900 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white p-2" aria-label="Buymeacoffee">
          <svg class="sm:w-5 sm:h-5 w-4 h-4" fill="currentColor" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg"><path d="m20.216 6.415-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 0 0-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 0 0-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 0 1-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 0 1 3.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 0 1-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 0 1-4.743.295 37.059 37.059 0 0 1-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0 0 11.343.376.483.483 0 0 1 .535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 0 1 .39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 0 1-.169.364zm-6.159 3.9c-.862.37-1.84.788-3.109.788a5.884 5.884 0 0 1-1.569-.217l.877 9.004c.065.78.717 1.38 1.5 1.38 0 0 1.243.065 1.658.065.447 0 1.786-.065 1.786-.065.783 0 1.434-.6 1.499-1.38l.94-9.95a3.996 3.996 0 0 0-1.322-.238c-.826 0-1.491.284-2.26.613z"/></svg>
        </a>
        <%= render "shared/theme_toggle_button" %>

        <% if current_user.present? %>
          <%= render 'shared/user_dropdown' %>
        <% else %>
          <%= link_to 'Увійти', new_user_session_path, class: 'inline-flex items-center rounded-lg justify-center pl-1 hover:underline text-xs font-medium leading-none text-gray-900 dark:text-white', area: { current: 'page' } %>
        <% end %>
      </div>

      <div class="w-full sm:flex sm:items-center sm:justify-center sm:order-2">
        <div class="flex relative items-center justify-center gap-4 p-2 rounded-lg">
          <button id="categoriesDropdownButton2" data-dropdown-toggle="categoriesDropdown2" type="button" class="w-auto justify-center inline-flex items-center flex-1 px-3 py-2 text-sm font-medium text-gray-900 border border-gray-200 dark:border-gray-700 sm:border-0 bg-white hover:bg-gray-50 rounded-lg sm:flex-none dark:bg-gray-900 dark:hover:bg-gray-700 sm:dark:hover:bg-gray-500 dark:text-white">
            <svg class="w-4 h-4 me-2 -ms-0.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7h1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h11.5M7 14h6m-6 3h6m0-10h.5m-.5 3h.5M7 7h3v3H7V7Z"/>
            </svg>

            Блоги
            <svg class="w-4 h-4 ms-2 -me-0.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
            </svg>
          </button>

          <!-- Mega Menu -->
          <div id="categoriesDropdown2" class="z-50 hidden mx-auto overflow-hidden antialiased bg-white rounded-lg shadow-lg dark:bg-gray-700">
            <div class="sm:flex sm:items-stretch">
              <ul class="p-4 space-y-4 sm:p-6 bg-gray-50 dark:bg-gray-600 text-sm font-medium text-gray-500 dark:text-gray-400">
                <li class="text-sm font-semibold text-gray-900 dark:text-white">Що нового?</li>
                <% trending_tags.each do |tt| %>
                  <li>
                    <%= link_to tt[:link], class: 'block hover:underline dark:hover:text-white hover:text-gray-900 inline-flex items-center flex-1' do %>
                      <svg class="w-4 h-4 me-2 -ms-0.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.583 8.445h.01M10.86 19.71l-6.573-6.63a.993.993 0 0 1 0-1.4l7.329-7.394A.98.98 0 0 1 12.31 4l5.734.007A1.968 1.968 0 0 1 20 5.983v5.5a.992.992 0 0 1-.316.727l-7.44 7.5a.974.974 0 0 1-1.384.001Z"/>
                      </svg>

                      <%= tt[:name] %>
                    <% end %>
                  </li>
                <% end %>
              </ul>
            </div>
          </div>

          <ul class="flex items-center space-x-4">
            <li>
              <%= link_to youtube_videos_path, class: 'items-center gap-2 px-2 py-1 text-sm hover:text-gray-700 dark:hover:text-gray-500 font-medium text-gray-900 rounded-lg inline-flex dark:text-white' do %>       
                Відео
              <% end %>
            </li>
          </ul>

          <button id="categoriesDropdownButton1" data-dropdown-toggle="categoriesDropdown1" type="button" class="w-auto justify-center inline-flex items-center flex-1 px-3 py-2 text-sm font-medium text-gray-900 border border-gray-200 dark:border-gray-700 sm:border-0 bg-white hover:bg-gray-50 rounded-lg sm:flex-none dark:bg-gray-900 dark:hover:bg-gray-700 sm:dark:hover:bg-gray-500 dark:text-white">
            <svg class="w-4 h-4 me-2 -ms-0.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 19V4a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v13H7a2 2 0 0 0-2 2Zm0 0a2 2 0 0 0 2 2h12M9 3v14m7 0v4"/>
            </svg>
            Ранобе
            <svg class="w-4 h-4 ms-2 -me-0.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
            </svg>
          </button>

          <!-- Mega Menu -->
          <div id="categoriesDropdown1" class="z-50 hidden mx-auto overflow-hidden antialiased bg-white rounded-lg shadow-lg dark:bg-gray-700">
            <div class="sm:flex sm:items-stretch">
              <div class="w-full px-2 py-4 space-y-4 max-w-sm sm:max-w-md sm:p-6 shrink-0">
                <%= link_to fictions_path, class: 'flex items-center gap-4 px-2 py-2 rounded-lg sm:px-4 hover:bg-gray-100 group dark:hover:bg-gray-600' do %>
                  <div class="inline-flex items-center justify-center w-8 h-8 bg-white rounded-full shadow shrink-0 dark:bg-gray-600">
                    <svg class="w-4 h-4 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.083 5.104c.35-.8 1.485-.8 1.834 0l1.752 4.022a1 1 0 0 0 .84.597l4.463.342c.9.069 1.255 1.2.556 1.771l-3.33 2.723a1 1 0 0 0-.337 1.016l1.03 4.119c.214.858-.71 1.552-1.474 1.106l-3.913-2.281a1 1 0 0 0-1.008 0L7.583 20.8c-.764.446-1.688-.248-1.474-1.106l1.03-4.119A1 1 0 0 0 6.8 14.56l-3.33-2.723c-.698-.571-.342-1.702.557-1.771l4.462-.342a1 1 0 0 0 .84-.597l1.753-4.022Z" />
                    </svg>
                  </div>

                  <div class="flex-1 min-w-0 space-y-0.5">
                    <p class="text-sm font-semibold leading-none text-gray-900 truncate dark:text-white">
                      Головна
                    </p>
                    <p class="text-sm font-normal text-gray-500 truncate dark:text-gray-400">
                      Найбільша колекція новел та фанфіків!
                    </p>
                  </div>

                  <div class="transition-all duration-200 -translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0">
                    <svg class="w-4 h-4 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5m14 0-4 4m4-4-4-4" />
                    </svg>
                  </div>
                <% end %>

                <%= link_to calendar_fictions_path, class: 'flex items-center gap-4 px-2 py-2 rounded-lg sm:px-4 hover:bg-gray-100 group dark:hover:bg-gray-600' do %>
                  <div class="inline-flex items-center justify-center w-8 h-8 bg-white rounded-full shadow shrink-0 dark:bg-gray-600">
                    <svg class="w-4 h-4 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 10h16m-8-3V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Zm3-7h.01v.01H8V13Zm4 0h.01v.01H12V13Zm4 0h.01v.01H16V13Zm-8 4h.01v.01H8V17Zm4 0h.01v.01H12V17Zm4 0h.01v.01H16V17Z" />
                    </svg>
                  </div>

                  <div class="flex-1 min-w-0 space-y-0.5">
                    <p class="text-sm font-semibold leading-none text-gray-900 truncate dark:text-white">
                      Календар
                    </p>
                    <p class="text-sm font-normal text-gray-500 truncate dark:text-gray-400">
                      Слідкуйте за виходом нових розділів!
                    </p>
                  </div>

                  <div class="transition-all duration-200 -translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0">
                    <svg class="w-4 h-4 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5m14 0-4 4m4-4-4-4" />
                    </svg>
                  </div>
                <% end %>

                <%= link_to translation_requests_path, class: 'flex items-center gap-4 px-2 py-2 rounded-lg sm:px-4 hover:bg-gray-100 group dark:hover:bg-gray-600' do %>
                  <div class="inline-flex items-center justify-center w-8 h-8 bg-white rounded-full shadow shrink-0 dark:bg-gray-600">
                    <svg class="w-4 h-4 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m13 19 3.5-9 3.5 9m-6.125-2h5.25M3 7h7m0 0h2m-2 0c0 1.63-.793 3.926-2.239 5.655M7.5 6.818V5m.261 7.655C6.79 13.82 5.521 14.725 4 15m3.761-2.345L5 10m2.761 2.655L10.2 15" />
                    </svg>
                  </div>

                  <div class="flex-1 min-w-0 space-y-0.5">
                    <p class="text-sm font-semibold leading-none text-gray-900 truncate dark:text-white">
                      Переклад
                    </p>
                    <p class="text-sm font-normal text-gray-500 truncate dark:text-gray-400">
                      Знайдіть команду для перекладу!
                    </p>
                  </div>

                  <div class="transition-all duration-200 -translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0">
                    <svg class="w-4 h-4 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5m14 0-4 4m4-4-4-4" />
                    </svg>
                  </div>
                <% end %>

                <%= link_to alphabetical_fictions_path, class: 'flex items-center gap-4 px-2 py-2 rounded-lg sm:px-4 hover:bg-gray-100 group dark:hover:bg-gray-600' do %>
                  <div class="inline-flex items-center justify-center w-8 h-8 bg-white rounded-full shadow shrink-0 dark:bg-gray-600">
                    <svg class="w-4 h-4 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12c.263 0 .524-.06.767-.175a2 2 0 0 0 .65-.491c.186-.21.333-.46.433-.734.1-.274.15-.568.15-.864a2.4 2.4 0 0 0 .586 1.591c.375.422.884.659 1.414.659.53 0 1.04-.237 1.414-.659A2.4 2.4 0 0 0 12 9.736a2.4 2.4 0 0 0 .586 1.591c.375.422.884.659 1.414.659.53 0 1.04-.237 1.414-.659A2.4 2.4 0 0 0 16 9.736c0 .295.052.588.152.861s.248.521.434.73a2 2 0 0 0 .649.488 1.809 1.809 0 0 0 1.53 0 2.03 2.03 0 0 0 .65-.488c.185-.209.332-.457.433-.73.1-.273.152-.566.152-.861 0-.974-1.108-3.85-1.618-5.121A.983.983 0 0 0 17.466 4H6.456a.986.986 0 0 0-.93.645C5.045 5.962 4 8.905 4 9.736c.023.59.241 1.148.611 1.567.37.418.865.667 1.389.697Zm0 0c.328 0 .651-.091.94-.266A2.1 2.1 0 0 0 7.66 11h.681a2.1 2.1 0 0 0 .718.734c.29.175.613.266.942.266.328 0 .651-.091.94-.266.29-.174.537-.427.719-.734h.681a2.1 2.1 0 0 0 .719.734c.289.175.612.266.94.266.329 0 .652-.091.942-.266.29-.174.536-.427.718-.734h.681c.183.307.43.56.719.734.29.174.613.266.941.266a1.819 1.819 0 0 0 1.06-.351M6 12a1.766 1.766 0 0 1-1.163-.476M5 12v7a1 1 0 0 0 1 1h2v-5h3v5h7a1 1 0 0 0 1-1v-7m-5 3v2h2v-2h-2Z" />
                    </svg>
                  </div>

                  <div class="flex-1 min-w-0 space-y-0.5">
                    <p class="text-sm font-semibold leading-none text-gray-900 truncate dark:text-white">
                      Сховище
                    </p>
                    <p class="text-sm font-normal text-gray-500 truncate dark:text-gray-400">
                      Усі ранобе, веб-новели та художня проза!
                    </p>
                  </div>

                  <div class="transition-all duration-200 -translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0">
                    <svg class="w-4 h-4 text-gray-900 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5m14 0-4 4m4-4-4-4" />
                    </svg>
                  </div>
                <% end %>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<div id="ecommerce-search-modal" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full sm:inset-0 h-[calc(100%-1rem)] max-h-full antialiased">
  <div class="relative p-4 w-full max-w-2xl max-h-full">
      <!-- Modal content -->
      <div class="relative bg-gray-200 rounded-lg shadow dark:bg-gray-700 p-3 sm:p-5">

      <div class="mb-4 flex items-center justify-between">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Пошук</h3>
        <button type="button" class="ms-auto inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white" data-modal-toggle="ecommerce-search-modal">
          <svg class="h-3 w-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
          </svg>
          <span class="sr-only">Close modal</span>
        </button>
      </div>

      <%= simple_form_for :search, url: search_index_path, method: :get, html: { class: "w-full mx-auto pb-4 mb-4 border-b border-gray-200 dark:border-gray-700" } do |form| %>
        <label for="search-bar" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
        <div class="relative">
          <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
              <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
              </svg>
          </div>
          <%= form.input nil,
                        type: 'search',
                        input_html: {
                          id: 'search-bar',
                          class: 'block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-gray-500 focus:border-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-gray-500 dark:focus:border-gray-500'
                        },
                        placeholder: 'Пошук серед усіх категорій...',
                        required: true %>
          <button type="submit" class="text-white absolute end-2.5 bottom-2.5 bg-gray-700 hover:bg-gray-900 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-gray-600 dark:focus:ring-gray-800">Пошук</button>
        </div>
      <% end %>

      <div class="mb-4">
        <h3 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Щойно Переглянуті Ранобе</h3>
        <ul class="text-sm font-normal text-gray-500 dark:text-gray-400 space-y-2">
          <% recent_ranobe.each do |progress| %>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-gray-500 dark:text-gray-400 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/>
              </svg>
              <%= link_to progress.fiction_title, fiction_path(progress.fiction), class: 'hover:underline' %>
            </li>
          <% end %>
        </ul>
      </div>

      <div class="mb-4">
        <h3 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Варті Уваги Новини</h3>
        <ul class="text-sm font-normal text-gray-500 dark:text-gray-400 space-y-2">
          <% popular_blogs.each do |blog| %>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-gray-500 dark:text-gray-400 me-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
              </svg>
              <%= link_to blog.title, tale_path(blog), class: 'hover:underline' %>
            </li>
          <% end %>
        </ul>
      </div>

      <div class="mb-4">
        <h3 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Обрані Відео</h3>
        <div class="grid grid-cols-2 gap-4">
          <% popular_videos.each do |video| %>
            <%= link_to youtube_video_path(video), class: 'block rounded-lg p-4 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 group space-y-2' do %>
              <%= image_tag url_for(video.thumbnail), alt: video.title, class: "h-40 w-full rounded-md", loading: 'eager' %>
              <%= tag.h2 video.title, class: 'group-hover:underline text-sm font-medium dark:text-white text-gray-900' %>
            <% end %>
          <% end %>
        </div>
      </div>

    </div>
  </div>
</div>
